<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product</title>
  </head>
  <body>
    <section class="main">
      <div class="left">
        <div class="wish_list"><i class="fa-regular fa-heart"></i></div>
        <div class="left_inner">
          <div class="main_pic">
            <img
              class="big_img"
              src="https://www.adorama.com/images/Large/gphero10hb.jpg"
              alt=""
            />
          </div>
          <div class="sub_pics">
            <div>
              <img
                class="small_img"
                src="https://www.adorama.com/images/Large/gphero10hb.jpg"
                alt=""
              />
            </div>
            <div>
              <img
                class="small_img"
                src="https://www.adorama.com/images/Large/gphero10hb_1.jpg"
                alt=""
              />
            </div>
            <div>
              <img
                class="small_img"
                src="https://www.adorama.com/images/Large/gphero10hb_2.jpg"
                alt=""
              />
            </div>
            <div>
              <img
                class="small_img"
                src="https://www.adorama.com/images/Large/gphero10hb_3.jpg"
                alt=""
              />
            </div>
            <div>
              <img
                class="small_img"
                src="https://www.adorama.com/images/Large/gphero10hb_4.jpg"
                alt=""
              />
            </div>
          </div>
        </div>
      </div>
      <div class="right">
        <div class="share">
          <span>Share:</span><i class="fa-solid fa-share-from-square"></i>
        </div>
        <p class="model">SPECIAL</p>
        <h1 id="title">GoPro HERO10 Black Action Camera with Holiday Bundle</h1>
        <p class="model">
          <span>SKU: GPHERO10HB</span><span> MFR: CHDRB-101-TH</span>
        </p>
        <div class="rating">
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>

          <i class="fa-solid fa-star"></i>
        </div>
        <div class="price_box">
          <div class="price">
            <h1>$</h1>
            <h1 id="now_price">428.00</h1>
          </div>
          <div class="save">
            <p>You Save:</p>
            <p>$70.00 (14%)</p>
          </div>
          <div class="or"><span>OR</span></div>
          <div class="financing">
            <p>
              <b>$72 </b> /mo suggested payments with 6â€‘month special financing.
              <a href=" Learn how."></a>
            </p>
          </div>
        </div>
        <p class="price_discount">
          Regular Price: $498.00 - Instant Rebate: $70.00 = $428.00 Sale price
          ends on 01/21/23
        </p>

        <div class="button_box">
          <div class="quantity">
            <div id="quantity">1</div>

            <div>
              <i id="inrement" class="fa-solid fa-caret-up"></i
              ><i id="decrement" class="fa-solid fa-caret-down"></i>
            </div>
          </div>
          <div id="addtocart">
            <span>Add to Cart</span>
          </div>
        </div>

        <div class="stock_des">
          <div>
            <i class="fa-solid fa-square-check"></i>
            <span>In Stock & Ready to Ship</span>
          </div>

          <div>
            <i class="fa-solid fa-truck"></i>
            <a href="">Calculate Shipping See all shipping options</a>
          </div>
        </div>
      </div>
    </section>

    <!-- script for change  small image with big image -->
    <script>
      let login = localStorage.getItem("login") || false;
      let cart_value = JSON.parse(localStorage.getItem("cart_items")) || 0;
      let cart_item = document.getElementById("cart_quantity");
      let price = document.getElementById("now_price");
      let title = document.getElementById("title");
      let quantity = document.getElementById("quantity");
      let inrement = document.getElementById("inrement");
      let decrement = document.getElementById("decrement");
      let addtocart = document.getElementById("addtocart");

      let main_img = document.querySelector(".big_img");
      let small_img = document.getElementsByClassName("small_img");

      for (let i = 0; i < 5; i++) {
        small_img[i].addEventListener("click", (e) => {
          e.preventDefault();

          main_img.setAttribute("src", small_img[i].src);
        });
      }
      // product details

      let product = JSON.parse(localStorage.getItem("product"));
      main_img.src = product.image;
      price.innerText = product.price;
      title.innerText = product.title;

      let quantity_number = +quantity.innerText;

      inrement.addEventListener("click", () => {
        quantity_number++;
        quantity.innerText = quantity_number;
        product.quantity = quantity_number;
        localStorage.setItem("product", JSON.stringify(product));
      });
      decrement.addEventListener("click", () => {
        if (quantity_number > 1) {
          quantity_number--;
          quantity.innerText = quantity_number;
          product.quantity = quantity_number;
          localStorage.setItem("product", JSON.stringify(product));
        }
      });

      let cart_data = JSON.parse(localStorage.getItem("cart")) || [];
      console.log(cart_data);
      addtocart.addEventListener("click", () => {
        product.quantity = +quantity_number;
        if (login) {
          if (check(product.id)) {
            cart_data.push(product);
            localStorage.setItem("cart", JSON.stringify(cart_data));
            alert("Product added to cart");

            cart_value += product.quantity;
            localStorage.setItem("cart_items", JSON.stringify(cart_value));

            cart_item.innerText = cart_value;
            // window.location.href = "cart.html"
          } else {
            alert("product already in cart");
            // window.location.href = "cart.html";
          }
        } else {
          alert("Please login to continue!");
          window.location.href = "signin.html";
          localStorage.setItem("login_1", true);
        }
      });

      function check(n) {
        for (let i = 0; i < cart_data.length; i++) {
          if (cart_data[i].id == n) {
            return false;
          }
        }
        return true;
      }

      // cart_value = JSON.parse(localStorage.getItem("cart_items")) || 0;
      // cart_value++;
      localStorage.setItem("cart_items", JSON.stringify(cart_value));
      cart_item = document.getElementById("cart_quantity");

      cart_item.innerText = cart_value;

      if (login) {
        let log_out = document.createElement("span");
        log_out.innerText = "Log Out";
        log_out.style.fontSize = "12px";
        log_out.style.textDecoration = "underline";
        log_out.style.cursor = "pointer";
        log_out.addEventListener("click", () => {
          localStorage.removeItem("login");
          localStorage.removeItem("cart");
          localStorage.removeItem("cart_items");
          localStorage.removeItem("total");

          window.location.href = "index.html";
          // localStorage.setItem("login", false);
        });
        document.getElementById("signin_text").innerHTML = "";
        document.getElementById("signin_text").innerText = login;
        document.getElementById("signin_text").append(log_out);
      } else {
        document.getElementById("signin_text").addEventListener("click", () => {
          window.location.href = "signin.html";
        });
      }

      let input_el = document.querySelector("#search_icon");

      input_el.addEventListener("click", () => {
        // alert(document.querySelector(".serchbar").value)
        let input = document.querySelector(".serchbar").value;
        localStorage.setItem("search", JSON.stringify(input));
        window.location.href = "search.html";
      });
    </script>
  </body>
</html>
